{"version":3,"sources":["webpack:///./src/App.css?ad7b","/./src/App.css","/./src/Links.tsx","/./src/Permalink.tsx","/./src/App.js"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","React","react_1","rendition_1","Links","_super","__extends","prototype","render","createElement","Box","href","Divider","Component","default","url_1","Permalink","props","call","this","Link","getPermalink","encodeURIComponent","text","e","console","log","decode","params","URLSearchParams","window","location","search","encoded","get","decodeURIComponent","stringify","value","JSON","App","_this","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","state","json_schema_text","json_schema","ui_object_text","ui_object","yaml_text","has_error","formData","errors","setState","evaluated","cdsl","setDataFromUrl","evaluate","event","data","keyCode","which","preventDefault","_this2","react__WEBPACK_IMPORTED_MODULE_1___default","a","rendition__WEBPACK_IMPORTED_MODULE_2__","_Links_tsx__WEBPACK_IMPORTED_MODULE_5___default","_Permalink_tsx__WEBPACK_IMPORTED_MODULE_6___default","flexDirection","monospace","minRows","autoRows","maxRows","placeholder","onChange","target","onKeyDown","noTab","h4","rendition_dist_unstable__WEBPACK_IMPORTED_MODULE_3__","schema","uiSchema","onFormSubmit","renderFormData","readOnly","noop"],"mappings":"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","file":"2.js","sourcesContent":["\nvar content = require(\"!!../node_modules/css-loader/index.js!./App.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./App.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./App.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".App {\\n  margin: 1rem;\\n  font-family: Arial, Helvetica, sans-serif;\\n}\\n\", \"\"]);\n\n// exports\n","import * as React from \"react\";\nimport { Component } from \"react\";\nimport { Box, Divider } from \"rendition\";\n\nclass Links extends Component {\n  render(): React.ReactNode {\n    return (\n      <Box>\n        Examples:\n        <a\n          href={\n            \"?yaml=version%3A 1%0Aproperties%3A%20%0A - a%3A%0A%20%20%20 type%3A string\"\n          }\n        >\n          one property\n        </a>\n        &nbsp;|&nbsp;\n        <a\n          href={\n            \"?yaml=title%3A resin-cli demo%0Aversion%3A 1%0Adefinitions%3A%0A%20 bootPartition%3A %26BOOT_PARTITION%0A%20%20%20 partition%3A 1%0Amapping%3A%0A%20 targets%3A%0A%20%20%20 config_json%3A%0A%20%20%20%20%20 type%3A file%0A%20%20%20%20%20 format%3A json%0A%20%20%20%20%20 location%3A%0A%20%20%20%20%20%20%20 << %3A *BOOT_PARTITION%0A%20%20%20%20%20%20%20 path%3A %2Fconfig.json%0A%20%20%20 resin_wifi%3A%0A%20%20%20%20%20 type%3A file%0A%20%20%20%20%20 format%3A ini%0A%20%20%20%20%20 location%3A%0A%20%20%20%20%20%20%20 << %3A *BOOT_PARTITION%0A%20%20%20%20%20%20%20 path%3A %2Fsystem-connections%2Fresin-wifi%0Aproperties%3A%0A%20 - network%3A%0A%20%20%20%20%20 title%3A Network%0A%20%20%20%20%20 properties%3A%0A%20%20%20%20%20%20%20 - ssid%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Network SSID%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A string%0A%20%20%20%20%20%20%20%20%20%20%20 minLength%3A 1%0A%20%20%20%20%20%20%20%20%20%20%20 maxLength%3A 32%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A resin_wifi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A wifi.ssid%0A%20%20%20%20%20%20%20 - passphrase%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Network Key%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A password%0A%20%20%20%20%20%20%20%20%20%20%20 minLength%3A 8%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A resin_wifi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A wifi-security.psk%0A%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20 target%3A resin_wifi%0A%20%20%20%20%20%20%20 template%3A%0A%20%20%20%20%20%20%20%20%20 connection%3A%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A wifi%0A%20%20%20%20%20%20%20%20%20 wifi%3A%0A%20%20%20%20%20%20%20%20%20%20%20 hidden%3A true%0A%20%20%20%20%20%20%20%20%20%20%20 mode%3A infrastructure%0A%20%20%20%20%20%20%20%20%20 wifi-security%3A%0A%20%20%20%20%20%20%20%20%20%20%20 auth-alg%3A open%0A%20%20%20%20%20%20%20%20%20%20%20 key-mgmt%3A wpa-psk%0A%20%20%20%20%20%20%20%20%20 ipv4%3A%0A%20%20%20%20%20%20%20%20%20%20%20 method%3A auto%0A%20%20%20%20%20%20%20%20%20 ipv6%3A%0A%20%20%20%20%20%20%20%20%20%20%20 addr-gen-mode%3A stable-privacy%0A%20%20%20%20%20%20%20%20%20%20%20 method%3A auto%0A%20 - advanced%3A%0A%20%20%20%20%20 title%3A Advanced%0A%20%20%20%20%20 properties%3A%0A%20%20%20%20%20%20%20 - hostname%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Device Hostname%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A string%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A config_json%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A hostname%0A%20%20%20%20%20%20%20 - persistentLogging%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Do you want to enable persistent logging%3F%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A boolean%0A%20%20%20%20%20%20%20%20%20%20%20 default%3A false%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A config_json%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A persistentLogging\"\n          }\n        >\n          network configuration\n        </a>\n        <Divider />\n        Documentation:\n        <a href={\"https://github.com/balena-io-modules/balena-cdsl/issues/15\"}>\n          What is supported\n        </a>\n        &nbsp;|&nbsp;\n        <a\n          href={\n            \"https://github.com/balena-io/balena/blob/832f5551127dd8e1e82fa082bea97fc4db81c3ce/specs/configuration-dsl.md\"\n          }\n        >\n          DSL specification\n        </a>\n        &nbsp;|&nbsp;\n        <a\n          href={\n            \"https://github.com/balena-io/balena/blob/63ca3a4b026694750f8d6f4e3eea9792cf344426/specs/configuration-dsl-mapping-extension.md\"\n          }\n        >\n          Mapping extensions\n        </a>\n        &nbsp;|&nbsp;\n        <a\n          href={\n            \"https://github.com/balena-io/balena/blob/8e9c7c177e8d730484fbfce5c4281d4c7c205565/specs/json-schema-extensions.md\"\n          }\n        >\n          JSON Schema extensions\n        </a>\n      </Box>\n    );\n  }\n}\n\nexport default Links;\n","import * as React from \"react\";\nimport { Component } from \"react\";\nimport { Box, Link } from \"rendition\";\nimport { URLSearchParams } from \"url\";\n\nconst propertyName = \"yaml\";\n\ninterface PermalinkProps {\n  text?: string;\n}\n\nclass Permalink extends Component<PermalinkProps, any> {\n  constructor(props: PermalinkProps) {\n    super(props);\n  }\n\n  render(): React.ReactNode {\n    return (\n      <Box>\n        <Link href={this.getPermalink()}>permalink</Link>\n      </Box>\n    );\n  }\n\n  getPermalink() {\n    try {\n      return \"?\" + propertyName + \"=\" + encodeURIComponent(this.props.text);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  static decode(): string {\n    try {\n      const params = new URLSearchParams(window.location.search);\n      const encoded = params.get(propertyName);\n      if (params && encoded) {\n        return decodeURIComponent(encoded);\n      }\n      return null;\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n\nexport default Permalink;\n","import \"./App.css\";\n\nimport React, { Component } from \"react\";\nimport { Box, Divider, Flex, Heading, Textarea } from \"rendition\";\nimport { Form } from \"rendition/dist/unstable\";\nimport * as cdsl from \"balena-cdsl\";\nimport Links from \"./Links.tsx\";\nimport Permalink from \"./Permalink.tsx\";\n\nconst stringify = value => JSON.stringify(value, null, 2);\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      json_schema_text: \"\",\n      json_schema: {},\n      ui_object_text: \"\",\n      ui_object: {},\n      yaml_text: \"\",\n      has_error: false,\n      formData: \"\",\n      errors: \"\"\n    };\n  }\n\n  evaluate(value) {\n    this.setState({ yaml_text: value });\n    try {\n      const evaluated = cdsl.generate_ui(value);\n      this.setState({\n        json_schema: evaluated.json_schema,\n        ui_object: evaluated.ui_object,\n        json_schema_text: stringify(evaluated.json_schema),\n        ui_object_text: stringify(evaluated.ui_object),\n        has_error: false\n      });\n    } catch (e) {\n      this.setState({\n        has_error: true,\n        errors: e\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.setDataFromUrl();\n  }\n\n  setDataFromUrl() {\n    const text = Permalink.decode();\n    if (text) {\n      this.evaluate(text);\n    }\n  }\n\n  renderFormData(event) {\n    try {\n      const data = event.formData;\n      this.setState({ formData: stringify(data) });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  noTab(event) {\n    const keyCode = event.keyCode || event.which;\n\n    if (keyCode == 9) {\n      event.preventDefault();\n    }\n  }\n\n  noop() {}\n\n  render() {\n    return (\n      <Box>\n        <Links />\n        <Divider />\n        <Permalink text={this.state.yaml_text} />\n        <Box>\n          <Flex flexDirection={\"column\"}>\n            <Flex>\n              <Textarea\n                monospace\n                minRows={12}\n                autoRows={true}\n                maxRows={16}\n                placeholder=\"yaml\"\n                onChange={event => this.evaluate(event.target.value)}\n                value={this.state.yaml_text}\n                onKeyDown={event => this.noTab(event)}\n              />\n            </Flex>\n          </Flex>\n        </Box>\n        <Divider />\n        {!this.state.has_error ? (\n          <Box>\n            <Box>\n              <Heading.h4>Rendered form</Heading.h4>\n              <Flex>\n                <Form\n                  schema={this.state.json_schema}\n                  uiSchema={this.state.ui_object}\n                  onFormSubmit={event => this.renderFormData(event)}\n                />\n              </Flex>\n            </Box>\n            {this.state.formData ? (\n              <Box>\n                <Heading.h4>Form data (dry json)</Heading.h4>\n                <Flex>\n                  <Textarea\n                    monospace\n                    autoRows={true}\n                    readOnly={true}\n                    placeholder={\"form data\"}\n                    value={this.state.formData}\n                    onChange={e => this.noop(e)}\n                  />\n                </Flex>\n              </Box>\n            ) : null}\n          </Box>\n        ) : null}\n        <Divider />\n        <Box>\n          {this.state.has_error ? (\n            <Box>\n              <Flex>\n                <Textarea\n                  monospace\n                  autoRows={true}\n                  readOnly={true}\n                  placeholder=\"errors\"\n                  onChange={e => this.noop(e)}\n                  value={this.state.errors}\n                />\n              </Flex>\n            </Box>\n          ) : null}\n          {!this.state.has_error ? (\n            <Box>\n              <Heading.h4>JSON and UI schemas</Heading.h4>\n              <Flex>\n                <Textarea\n                  monospace\n                  autoRows={true}\n                  readOnly={true}\n                  maxRows={16}\n                  placeholder=\"json schema\"\n                  onChange={e => this.noop(e)}\n                  value={this.state.json_schema_text}\n                />\n                <Textarea\n                  monospace\n                  autoRows={true}\n                  readOnly={true}\n                  maxRows={16}\n                  placeholder=\"ui object\"\n                  onChange={e => this.noop(e)}\n                  value={this.state.ui_object_text}\n                />\n              </Flex>\n            </Box>\n          ) : null}\n        </Box>\n        <Divider />\n      </Box>\n    );\n  }\n}\n\nexport default App;\n"],"sourceRoot":""}