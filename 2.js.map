{"version":3,"sources":["webpack:///./src/App.css?ad7b","/./src/App.css","/./src/Links.tsx","/./src/Permalink.tsx","/./src/App.js"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","src_Links","react","[object Object]","dist","href","propertyName","src_Permalink","props","super","this","getPermalink","encodeURIComponent","text","e","console","log","params","URLSearchParams","window","location","search","encoded","get","decodeURIComponent","stringify","value","JSON","App","_this","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","state","json_schema_text","json_schema","ui_object_text","ui_object","yaml_text","has_error","formData","errors","Component","setState","evaluated","cdsl","setDataFromUrl","Permalink","decode","evaluate","event","data","keyCode","which","preventDefault","_this2","react_default","a","createElement","flexDirection","monospace","minRows","autoRows","maxRows","placeholder","onChange","target","onKeyDown","noTab","h4","unstable","schema","uiSchema","onFormSubmit","renderFormData","readOnly","noop"],"mappings":"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","file":"2.js","sourcesContent":["\nvar content = require(\"!!../node_modules/css-loader/index.js!./App.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./App.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./App.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".App {\\n  margin: 1rem;\\n  font-family: Arial, Helvetica, sans-serif;\\n}\\n\", \"\"]);\n\n// exports\n","import * as React from \"react\";\nimport {Component} from \"react\";\nimport {Box, Divider} from 'rendition';\n\nclass Links extends Component {\n\trender(): React.ReactNode {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\tExamples:\n\t\t\t\t<a\n\t\t\t\t\thref={'?yaml=version%3A 1%0Aproperties%3A%20%0A - a%3A%0A%20%20%20 type%3A string'}>\n\t\t\t\t\tone property\n\t\t\t\t</a>\n\t\t\t\t&nbsp;|&nbsp;\n\t\t\t\t<a\n\t\t\t\t\thref={'?yaml=title%3A resin-cli demo%0Aversion%3A 1%0Adefinitions%3A%0A%20 bootPartition%3A %26BOOT_PARTITION%0A%20%20%20 partition%3A 1%0Amapping%3A%0A%20 targets%3A%0A%20%20%20 config_json%3A%0A%20%20%20%20%20 type%3A file%0A%20%20%20%20%20 format%3A json%0A%20%20%20%20%20 location%3A%0A%20%20%20%20%20%20%20 << %3A *BOOT_PARTITION%0A%20%20%20%20%20%20%20 path%3A %2Fconfig.json%0A%20%20%20 resin_wifi%3A%0A%20%20%20%20%20 type%3A file%0A%20%20%20%20%20 format%3A ini%0A%20%20%20%20%20 location%3A%0A%20%20%20%20%20%20%20 << %3A *BOOT_PARTITION%0A%20%20%20%20%20%20%20 path%3A %2Fsystem-connections%2Fresin-wifi%0Aproperties%3A%0A%20 - network%3A%0A%20%20%20%20%20 title%3A Network%0A%20%20%20%20%20 properties%3A%0A%20%20%20%20%20%20%20 - ssid%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Network SSID%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A string%0A%20%20%20%20%20%20%20%20%20%20%20 minLength%3A 1%0A%20%20%20%20%20%20%20%20%20%20%20 maxLength%3A 32%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A resin_wifi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A wifi.ssid%0A%20%20%20%20%20%20%20 - passphrase%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Network Key%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A password%0A%20%20%20%20%20%20%20%20%20%20%20 minLength%3A 8%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A resin_wifi%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A wifi-security.psk%0A%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20 target%3A resin_wifi%0A%20%20%20%20%20%20%20 template%3A%0A%20%20%20%20%20%20%20%20%20 connection%3A%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A wifi%0A%20%20%20%20%20%20%20%20%20 wifi%3A%0A%20%20%20%20%20%20%20%20%20%20%20 hidden%3A true%0A%20%20%20%20%20%20%20%20%20%20%20 mode%3A infrastructure%0A%20%20%20%20%20%20%20%20%20 wifi-security%3A%0A%20%20%20%20%20%20%20%20%20%20%20 auth-alg%3A open%0A%20%20%20%20%20%20%20%20%20%20%20 key-mgmt%3A wpa-psk%0A%20%20%20%20%20%20%20%20%20 ipv4%3A%0A%20%20%20%20%20%20%20%20%20%20%20 method%3A auto%0A%20%20%20%20%20%20%20%20%20 ipv6%3A%0A%20%20%20%20%20%20%20%20%20%20%20 addr-gen-mode%3A stable-privacy%0A%20%20%20%20%20%20%20%20%20%20%20 method%3A auto%0A%20 - advanced%3A%0A%20%20%20%20%20 title%3A Advanced%0A%20%20%20%20%20 properties%3A%0A%20%20%20%20%20%20%20 - hostname%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Device Hostname%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A string%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A config_json%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A hostname%0A%20%20%20%20%20%20%20 - persistentLogging%3A%0A%20%20%20%20%20%20%20%20%20%20%20 title%3A Do you want to enable persistent logging%3F%0A%20%20%20%20%20%20%20%20%20%20%20 type%3A boolean%0A%20%20%20%20%20%20%20%20%20%20%20 default%3A false%0A%20%20%20%20%20%20%20%20%20%20%20 mapping%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 target%3A config_json%0A%20%20%20%20%20%20%20%20%20%20%20%20%20 path%3A persistentLogging'}>\n\t\t\t\t\tnetwork configuration\n\t\t\t\t</a>\n\t\t\t\t<Divider/>\n\t\t\t\tDocumentation:\n\t\t\t\t<a href={'https://github.com/balena-io-modules/balena-cdsl/issues/15'}>\n\t\t\t\t\tWhat is supported\n\t\t\t\t</a>\n\t\t\t\t&nbsp;|&nbsp;\n\t\t\t\t<a\n\t\t\t\t\thref={'https://github.com/balena-io/balena/blob/832f5551127dd8e1e82fa082bea97fc4db81c3ce/specs/configuration-dsl.md'}>\n\t\t\t\t\tDSL specification\n\t\t\t\t</a>\n\t\t\t\t&nbsp;|&nbsp;\n\t\t\t\t<a\n\t\t\t\t\thref={'https://github.com/balena-io/balena/blob/63ca3a4b026694750f8d6f4e3eea9792cf344426/specs/configuration-dsl-mapping-extension.md'}>\n\t\t\t\t\tMapping extensions\n\t\t\t\t</a>\n\t\t\t\t&nbsp;|&nbsp;\n\t\t\t\t<a\n\t\t\t\t\thref={'https://github.com/balena-io/balena/blob/8e9c7c177e8d730484fbfce5c4281d4c7c205565/specs/json-schema-extensions.md'}>\n\t\t\t\t\tJSON Schema extensions\n\t\t\t\t</a>\n\t\t\t</Box>\n\t\t)\n\t}\n}\n\nexport default Links;\n","import * as React from \"react\";\nimport {Component} from \"react\";\nimport {Box, Flex, Link, Textarea} from 'rendition';\n\nconst propertyName = 'yaml'\n\ninterface PermalinkProps {\n\ttext?: string;\n}\n\nclass Permalink extends Component<PermalinkProps, any> {\n\n\tconstructor(props: PermalinkProps) {\n\t\tsuper(props)\n\t}\n\n\trender(): React.ReactNode {\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<Link href={this.getPermalink()}>\n\t\t\t\t\tpermalink\n\t\t\t\t</Link>\n\t\t\t</Box>\n\t\t)\n\t}\n\n\tgetPermalink() {\n\t\ttry {\n\t\t\treturn '?'+propertyName+'=' + encodeURIComponent(this.props.text)\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n\n\tstatic decode(): string {\n\t\ttry {\n\t\t\tconst params = new URLSearchParams(window.location.search)\n\t\t\tconst encoded = params.get(propertyName)\n\t\t\tif (params && encoded) {\n\t\t\t\tconst yaml_from_url = decodeURIComponent(encoded)\n\t\t\t\treturn yaml_from_url\n\t\t\t}\n\t\t\treturn null\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n}\n\nexport default Permalink;\n","import './App.css'\n\nimport React, { Component } from 'react'\nimport { Box, Divider, Flex, Heading, Textarea } from 'rendition'\nimport { Form } from 'rendition/dist/unstable'\nimport * as cdsl from 'balena-cdsl'\nimport Links from './Links.tsx'\nimport Permalink from './Permalink.tsx'\n\nconst stringify = (value) => JSON.stringify(value, null, 2)\n\nclass App extends Component {\n\n  constructor() {\n    super();\n\n    this.state = {\n      json_schema_text: '',\n      json_schema: {},\n      ui_object_text: '',\n      ui_object: {},\n      yaml_text: '',\n      has_error: false,\n      formData: '',\n      errors: ''\n    }\n\n  }\n\n  evaluate(value) {\n    this.setState({yaml_text: value})\n    try {\n      const evaluated = cdsl.generate_ui(value)\n      this.setState({\n        json_schema: evaluated.json_schema,\n        ui_object: evaluated.ui_object,\n        json_schema_text: stringify(evaluated.json_schema),\n        ui_object_text: stringify(evaluated.ui_object),\n        has_error: false\n      })\n    } catch (e) {\n      this.setState({\n        has_error: true,\n        errors: e\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.setDataFromUrl()\n  }\n\n  setDataFromUrl() {\n    const text = Permalink.decode()\n    if(text) {\n      this.evaluate(text);\n    }\n  }\n\n\n  renderFormData(event) {\n    try {\n      const data = event.formData\n      this.setState({formData: stringify(data)})\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  noTab(event) {\n    const keyCode = event.keyCode || event.which;\n\n    if (keyCode == 9) {\n      event.preventDefault();\n    }\n  }\n\n  noop(){}\n\n  render() {\n    return (\n      <Box>\n        <Links/>\n        <Divider/>\n        <Permalink text={this.state.yaml_text}/>\n        <Box>\n          <Flex flexDirection={'column'}>\n            <Flex>\n\t\t\t<Textarea monospace minRows={12} autoRows={true} maxRows={16} placeholder=\"yaml\"\n                onChange={event => this.evaluate(event.target.value)}\n                value={this.state.yaml_text} onKeyDown={event => this.noTab(event)}\n      />\n            </Flex>\n          </Flex>\n        </Box>\n        <Divider/>\n        {!this.state.has_error ?\n          <Box>\n            <Box>\n              <Heading.h4>Rendered form</Heading.h4>\n              <Flex>\n              <Form schema={this.state.json_schema} uiSchema={this.state.ui_object}\n                    onFormSubmit={event => this.renderFormData(event)}/>\n              </Flex>\n            </Box>\n            {this.state.formData ?\n            <Box>\n              <Heading.h4>Form data (dry json)</Heading.h4>\n              <Flex>\n                <Textarea monospace autoRows={true} readOnly={true} placeholder={'form data'}\n                          value={this.state.formData}\n                          onChange={e=>this.noop(e)}\n                />\n\n\n              </Flex>\n            </Box>\n              : null}\n          </Box>\n          : null}\n        <Divider/>\n        <Box>\n          {this.state.has_error ?\n            <Box>\n              <Flex>\n                <Textarea monospace autoRows={true} readOnly={true} placeholder=\"errors\"\n                          onChange={e=>this.noop(e)}\n                          value={this.state.errors}/>\n              </Flex>\n            </Box>\n            : null}\n          {!this.state.has_error ?\n            <Box>\n            <Heading.h4>JSON and UI schemas</Heading.h4>\n            <Flex>\n            <Textarea monospace autoRows={true} readOnly={true} maxRows={16} placeholder=\"json schema\"\n                      onChange={e=>this.noop(e)}\n                      value={this.state.json_schema_text}\n            />\n              <Textarea monospace autoRows={true} readOnly={true} maxRows={16} placeholder=\"ui object\"\n                        onChange={e=>this.noop(e)}\n                        value={this.state.ui_object_text}\n              />\n            </Flex>\n            </Box>\n            : null}\n        </Box>\n        <Divider/>\n      </Box>\n    );\n  }\n}\n\nexport default App;\n"],"sourceRoot":""}