(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{828:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n(48),a=n(883),i=n.n(a),l=n(837),c=n.n(l),u=n(829),s=n(854),p=n.n(s),f=(n(838),n(884)),m=n.n(f);n(890),n(891);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=b(t).call(this,e))||"object"!==y(r)&&"function"!=typeof r?d(o):r).state={yamlText:"",hasError:!1,error:null,formUI:null},n.onChange=n.onChange.bind(d(n)),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o["Component"]),n=t,(a=[{key:"onChange",value:function(e){this.setState({yamlText:e});try{var t=u.generateJsonAndUiSchema(e);this.setState({formUI:t,hasError:!1}),this.props.onChange&&this.props.onChange(e,t)}catch(e){this.onError(e)}}},{key:"onError",value:function(e){this.setState({hasError:!0,error:e}),this.props.onError&&this.props.onError(e)}},{key:"componentDidMount",value:function(){this.setDataFromUrl()}},{key:"setDataFromUrl",value:function(){var e=p.a.decode();e&&this.onChange(e)}},{key:"render",value:function(){return o.createElement(r.Box,null,o.createElement(p.a,{text:this.state.yamlText}),o.createElement(r.Flex,null,o.createElement(m.a,{width:"100%",mode:"yaml",theme:"github",onChange:this.onChange,name:"ace_editor",enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,tabSize:2,maxLines:20,value:this.state.yamlText}),",",this.state.hasError?o.createElement(c.a,{value:this.state.error,onChange:function(e){}}):null))}}])&&h(n.prototype,a),i&&h(n,i),t}(),_=n(393);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=Object(_.a)(function(){return Promise.all([n.e(1),n.e(4)]).then(n.t.bind(null,1057,7))}),P=function(e){return JSON.stringify(e,null,2)},k=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=E(this,w(t).call(this,e))).state={formData:null,errors:""},n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,o["Component"]),n=t,(a=[{key:"renderFormData",value:function(e){try{var t=new u.JellySchema(this.props.yamlText),n="";t.validate(e.formData)||(n=P(t.errors())),this.setState({formData:P(e.formData),errors:n})}catch(e){console.log(e)}}},{key:"render",value:function(){var e=this;return o.createElement(r.Box,null,o.createElement(r.Heading.h4,null,"Rendered form"),o.createElement(r.Flex,null,this.props.yamlText?o.createElement(r.Flex,{width:.5},o.createElement(S,{width:.5,schema:this.props.yamlText,onFormChange:function(t){return e.renderFormData(t)}})):null,this.state.formData?o.createElement(c.a,{width:.5,placeholder:"form data",value:this.state.formData,onChange:function(t){return e.noop(t)}}):null),o.createElement(r.Divider,null),this.state.errors?o.createElement(r.Box,null,o.createElement(r.Heading.h4,null,"Form data validation errors"),o.createElement(r.Flex,null,o.createElement(c.a,{placeholder:"data validation errors",value:this.state.errors,onChange:function(e){return noop(e)}}))):null)}},{key:"noop",value:function(){}}])&&O(n.prototype,a),i&&O(n,i),t}(),D=n(894),C=n.n(D);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function F(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){return JSON.stringify(e,null,2)},A=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=F(this,L(t).call(this))).state={yamlText:"",json_schema_text:"",json_schema:{},ui_object_text:"",ui_object:{},formData:"",hasError:!1},e}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,o["Component"]),n=t,(a=[{key:"noop",value:function(){}},{key:"onDSLChanged",value:function(e,t){var n=R(t.jsonSchema),o=R(t.uiSchema);this.setState({yamlText:e,json_schema:t.jsonSchema,json_schema_text:n,ui_object:t.uiSchema,ui_object_text:o,hasError:!1})}},{key:"onDSLError",value:function(e){this.setState({hasError:!0})}},{key:"render",value:function(){var e=this;return o.createElement(r.Box,null,o.createElement(i.a,null),o.createElement(r.Divider,null),o.createElement(x,{onChange:function(t,n){return e.onDSLChanged(t,n)},onError:function(t){return e.onDSLError(t)}}),o.createElement(C.a,null),o.createElement(r.Divider,null),this.state.hasError?null:o.createElement(k,{yamlText:this.state.yamlText}),o.createElement(r.Divider,null),o.createElement(r.Box,null,this.state.hasError?null:o.createElement(r.Box,null,o.createElement(r.Heading.h4,null,"JSON and UI schemas"),o.createElement(r.Flex,null,o.createElement(c.a,{placeholder:"json schema",onChange:function(t){return e.noop(t)},value:this.state.json_schema_text}),o.createElement(c.a,{placeholder:"ui object",onChange:function(t){return e.noop(t)},value:this.state.ui_object_text})))),o.createElement(r.Divider,null))}}])&&U(n.prototype,a),l&&U(n,l),t}();t.default=A},837:function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(48);t.default=function(e){return r.createElement(a.Textarea,o({monospace:!0,minRows:12,autoRows:!0,maxRows:16,onKeyDown:function(e){return function(e){9==(e.keyCode||e.which)&&e.preventDefault()}(e)}},e))}},854:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),c=n(1),u=n(48),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.encode=function(e){return encodeURIComponent(btoa(e))},t.decode=function(){try{var e=new URLSearchParams(window.location.search),t=e.get("yaml");return e&&t?atob(decodeURIComponent(t)):null}catch(e){console.log(e)}},t.prototype.render=function(){var e=this.props,t=e.children,n=(e.text,i(e,["children","text"]));return l.createElement(u.Link,a({},n,{href:this.getPermalink()}),t||"permalink")},t.prototype.getPermalink=function(){try{return"?yaml="+t.encode(this.props.text)}catch(e){console.log(e)}},t}(c.Component);t.default=s},883:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(1),l=n(48),c=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return a.createElement(l.Box,null,"Documentation:",a.createElement("a",{href:"https://github.com/balena-io-modules/balena-cdsl/issues/15"},"What is supported")," | ",a.createElement("a",{href:"https://github.com/balena-io/balena/blob/9471e79bcdaa75a567e89b7d3ce4a11979d38485/specs/configuration-dsl.md"},"DSL specification")," | ",a.createElement("a",{href:"https://github.com/balena-io/balena/blob/614c8f4c3960008f5da7feb63752040287c1f540/specs/configuration-dsl-mapping-extension.md"},"Mapping extensions")," | ",a.createElement("a",{href:"https://github.com/balena-io/balena/blob/8e9c7c177e8d730484fbfce5c4281d4c7c205565/specs/json-schema-extensions.md"},"JSON Schema extensions")," | ",a.createElement("a",{href:"https://docs.google.com/document/d/1GzzTOEkxIg8mis7c6WU41AU7AIYLYhImgJ_5383Kknc/edit"},"Known UI issues"),a.createElement(l.Divider,null))},t}(i.Component);t.default=c},893:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=893},894:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(1),l=n(895),c=n(896);var u,s=(u=n(897)).keys().map(u),p={},f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={allExamples:{}},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this;s.map(function(t){c.default.get(t).text().then(function(e){var n=t.replace("examples/","");p[n]=e}).then(function(){e.setState({allExamples:p})})})},t.prototype.render=function(){return a.createElement(l.default,{examples:this.state.allExamples})},t}(i.Component);t.default=f},895:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(1),l=n(48),c=n(854),u=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=this.props.examples;return a.createElement(l.DropDownButton,{joined:!0,label:a.createElement("div",null,"Examples")},Object.keys(e).sort().map(function(t,n){return a.createElement(c.default,{mx:2,text:e[t],key:n},t)}))},t}(i.Component);t.default=u},897:function(e,t,n){var o={"./000 balena os.yaml":898,"./001 primitive types.yaml":899,"./002 abstract data types.yaml":900,"./003 structures.yaml":901,"./004 optional types.yaml":902,"./005 annotations.yaml":903,"./006 group annotations.yaml":904,"./007 property annotations.yaml":905,"./008 array annotations.yaml":906,"./009 integer validation.yaml":907,"./010 number validation.yaml":908,"./011 string validation.yaml":909,"./012 array validation.yaml":910,"./013 formula functions.yaml":911,"./014 formula filters.yaml":912,"./015 formula math.yaml":913,"./016 formula string concat.yaml":914,"./017 formula chained math.yaml":915,"./018 formula boolean.yaml":916,"./900 simplest schema.yaml":917,"./901 network configuration.yaml":918,"./902 advanced network configuration.yaml":919};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=897},898:function(e,t,n){e.exports=n.p+"examples/000 balena os.yaml"},899:function(e,t,n){e.exports=n.p+"examples/001 primitive types.yaml"},900:function(e,t,n){e.exports=n.p+"examples/002 abstract data types.yaml"},901:function(e,t,n){e.exports=n.p+"examples/003 structures.yaml"},902:function(e,t,n){e.exports=n.p+"examples/004 optional types.yaml"},903:function(e,t,n){e.exports=n.p+"examples/005 annotations.yaml"},904:function(e,t,n){e.exports=n.p+"examples/006 group annotations.yaml"},905:function(e,t,n){e.exports=n.p+"examples/007 property annotations.yaml"},906:function(e,t,n){e.exports=n.p+"examples/008 array annotations.yaml"},907:function(e,t,n){e.exports=n.p+"examples/009 integer validation.yaml"},908:function(e,t,n){e.exports=n.p+"examples/010 number validation.yaml"},909:function(e,t,n){e.exports=n.p+"examples/011 string validation.yaml"},910:function(e,t,n){e.exports=n.p+"examples/012 array validation.yaml"},911:function(e,t,n){e.exports=n.p+"examples/013 formula functions.yaml"},912:function(e,t,n){e.exports=n.p+"examples/014 formula filters.yaml"},913:function(e,t,n){e.exports=n.p+"examples/015 formula math.yaml"},914:function(e,t,n){e.exports=n.p+"examples/016 formula string concat.yaml"},915:function(e,t,n){e.exports=n.p+"examples/017 formula chained math.yaml"},916:function(e,t,n){e.exports=n.p+"examples/018 formula boolean.yaml"},917:function(e,t,n){e.exports=n.p+"examples/900 simplest schema.yaml"},918:function(e,t,n){e.exports=n.p+"examples/901 network configuration.yaml"},919:function(e,t,n){e.exports=n.p+"examples/902 advanced network configuration.yaml"}}]);
//# sourceMappingURL=2.js.map